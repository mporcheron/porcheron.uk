
// GLOBAL
a[href^="https://doi.org"], a[href^="https://cronfa.swan.ac.uk"] {
    overflow-wrap: break-word;
    word-wrap: break-word;
    -ms-word-break: break-all;
    word-break: break-all;
}

p:last-child, ol:last-child, ul:last-child {
    margin-bottom: 0;
}

.pdficon {
    background-image: $pdficon-bg-image;
    display: block;
    width: $pdficon-w;
    height: $pdficon-h;
    background-repeat: no-repeat;
    opacity: $pdficon-o;
    @include auto-transition(opacity);

    &:hover {
        opacity: 1;
    }
}

.video-unactivated {
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

textarea {
    &[readonly="readonly"] {
        outline: none !important;
        resize: none;
    }
}



// BACKGROUND
html {
    background-color: $html-bg;
}

body {
    background-color: $body-bg;
	background: $body-bg-gradient;
	background-attachment: fixed;
    direction: ltr;
    min-height: 100%;
    padding: $body-p;
    @include auto-transition((background-image), $transition-duration);
}

aside {
    font-family: $aside-font-family;
	color: $aside-fg;
				
	svg {
		fill: $aside-fg;
		width: 1rem;
		@include auto-transition((opacity, margin, transform), $transition-duration);
	}
	
	hr {
		background-color: $aside-fg;
        border-top: 0;
		height: $aside-hr-h;
        opacity: 1;
	}

	header {
		color: $header-fg;
		font-size: $header-font-size;
		font-weight: $header-weight;
		line-height: $header-line-height;
		
		a, a:hover, a:visited {
			color: $header-fg;
		}
		
		a[aria-expanded="true"] {
			svg {
				transform: rotate(0.25turn);
			}
		}
	}

	nav {
		font-family: $nav-font-family;
		font-size: $nav-font-size;
		opacity: 0;
		@include auto-transition((opacity), $transition-duration);
			
		& > div > div {
			background: $nav-bg;
			-webkit-backdrop-filter: $nav-bg-filter;
			backdrop-filter: $nav-bg-filter;
			border-radius: $nav-border-radius !important;
		
			ul {
				background: $nav-inner-bg;
				border-radius: $nav-inner-border-radius !important;

				.nav-link {
					display: inline-block;	
					opacity: $nav-link-opacity;
				
					svg {
						width: .5rem;
						opacity: 0;
						margin-right: $nav-chevron-move;
					}
				}

				.nav-link:hover, .nav-link.show {
					opacity: $nav-link-hover-opacity;
				}
		
				.nav-link.active {
					opacity: 1 !important;
			
					& svg {
						opacity: 0
					}
				}
			}
		}

		&.show {
			opacity: 1;
		}
	}
	
	footer {
		color: $footer-fg;
		
		a, a:active, a:hover, a:visited {
			color: $footer-fg !important;
		}
	}
}



// MAIN
main {
	& > div { 
		background: $main-bg;
		-webkit-backdrop-filter: $main-bg-filter;
		backdrop-filter: $main-bg-filter;
		line-height: $main-line-spacing;
	
		article {
			background: $main-inner-bg;
			color: $main-fg;

			.text-muted {
				color: $text-muted-fg !important;
			}
		}
	}	
	
	footer {
		color: $footer-fg;

		a, a:active, a:hover, a:visited {
			color: $footer-fg !important;
		}
	}
}




// DESKTOP
@include media-breakpoint-up(md) {
	body {
    	background: $body-bg-img, $body-bg-gradient;
		background-attachment: fixed;
    }
    
	aside {
		max-width: 25rem;
	
		header {
			font-size: $header-font-size-md;
		}

		nav {
			display: block !important;
			font-family: $nav-font-family-md;
			font-size: $nav-font-size-md;
			opacity: 1 !important;
			
			& > div > div {
				background: transparent;
				-webkit-backdrop-filter: initial;
				backdrop-filter: initial;
				border-radius: 0 !important;
		
				ul {
					background: transparent;
					border-radius: 0 !important;

					.nav-item {
						border-bottom: 0 !important;
					}

					.nav-link, .nav-link:hover, .nav-link.active, .nav-link.show {
						color: $nav-fg-md !important;
						
						svg {
							fill: $nav-fg-md;
						}
					}

					.nav-link:hover, .nav-link.show {
						& svg {
							opacity: $nav-link-hover-opacity;
							margin-left: $nav-chevron-move;
						}
					}
				}
			}
		}
	}
	
	main {
		margin-top: $main-mt-md;
	}
}

// CONTENT FORMATTING
// article {
// 
// 	h1, h2, h3 {
// 		font-weight: bold;
// 	}
// 
//     p, h2, ol {
//         margin-bottom: $content-p-mb;
//     }
// 
// 
// blockquote {
//     margin: $blockquote-m;
// 
//     p {
//         padding: $blockquote-p;
//     }
// }
// 
// figure {
//     @include auto-transition((margin, max-width, width), $transition-duration);
//     margin-bottom: $content-p-mb;
// 
//     &.video {
//         & figcaption p {
//             margin: 0;
//         }
// 
//         iframe {
//             display: block;
//             width: 100%;
//         }
// 
//     }
// 
//     &:first-child {
//         margin-bottom: $spacer !important;
//         margin-top: 0 !important;
//     }
// 
// }
// 
// @include media-breakpoint-up(sm) {
//     figure.autosize {
//         cursor: zoom-in;
// 
//         & figcaption p {
//             display: -webkit-box;
//             -webkit-box-orient: vertical;
//             -webkit-line-clamp: $figcaption-p-max-lines;
//             overflow: hidden;
//         }
// 
//         figcaption svg.icon {
//             padding: $figcaption-icon-expand-p;
//             width: $figcaption-icon-expand-w;
//         }
// 
//         &:hover {
//             flex: 0 0 $figure-sm-hover-w;
//             width: $figure-sm-hover-w;
//         }
// 
//     }
// 
// }
// 
// @include media-breakpoint-up(lg) {
//     figure.autosize {
//         &:hover {
//             width: $figure-lg-hover-w;
//         }
// 
//     }
// 
// }
// 
// .footnotes ol {
//     margin: 0;
// }
// 
// a.reversefootnote {
//     text-decoration: none !important;
// }
// 
// article {
// 
// 	hr {
// 		border-top: 0;
// 		border-radius: $hr-border-radius;
// 		height: $hr-h !important;
// 		margin: $hr-my auto !important;
// 		opacity: 1;
// 		width: $hr-w;
// 	}
// 
// }
// 
// @include media-breakpoint-up(lg) {
// article {
//     hr {
//         margin: $hr-lg-my 0;
// 		width: $hr-w-lg;
//     }
//     }
// 
// }
// 
// /* Font fixes */
// 
// article {
// hr + h2, h2 + .h2, hr + h3, h2 + .h3 {
//     padding-top: 0 !important;
// }
// hr + h2 {
// 	margin-top: -.35rem;
// }
// }
// 
// 

// 
// }


// FOOTER
